apiVersion: v1
kind: ConfigMap
metadata:
  name: uaa-yml-config
data:
  uaa.yml: |-
    scim:
      groups:
        zones.read: Read identity zones
        zones.write: Create and update identity zones
        idps.read: Retrieve identity providers
        idps.write: Create and update identity providers
        clients.admin: Create, modify and delete OAuth clients
        clients.write: Create and modify OAuth clients
        clients.read: Read information about OAuth clients
        clients.secret: Change the password of an OAuth client
        scim.write: Create, modify and delete SCIM entities, i.e. users and groups
        scim.read: Read all SCIM entities, i.e. users and groups
        scim.create: Create users
        scim.userids: Read user IDs and retrieve users by ID
        scim.zones: Control a user's ability to manage a zone
        scim.invite: Send invitations to users
        password.write: Change your password
        oauth.approval: Manage approved scopes
        oauth.login: Authenticate users outside of the UAA
        openid: Access profile information, i.e. email, first and last name, and phone number
        groups.update: Update group information and memberships
        uaa.user: Act as a user in the UAA
        uaa.resource: Serve resources protected by the UAA
        uaa.admin: Act as an administrator throughout the UAA
        uaa.none: Forbid acting as a user
        uaa.offline_token: Allow offline access

    oauth:
      user:
        authorities:
          - openid
          - scim.me
          - cloud_controller.read
          - cloud_controller.write
          - cloud_controller_service_permissions.read
          - password.write
          - scim.userids
          - uaa.user
          - approvals.me
          - oauth.approvals
          - profile
          - roles
          - user_attributes
          - uaa.offline_token

    jwt:
      token:
        claims:
          exclude:
            - authorities
        policy:
          global:
            refreshTokenValiditySeconds: 86400

    assetBaseUrl: /resources/predix

    links:
      passwd: /forgot_password
      signup: /create_account

    issuer:
      uri: http://uaa.local

    login:
      selfServiceLinksEnabled: true
      url: http://uaa.local
      entityBaseURL: http://uaa.local
      entityID: cloudfoundry-saml-login
      saml:
        nameID: 'urn:oasis:names:tc:SAML:1.1:nameid-format:unspecified'
        assertionConsumerIndex: 0
        signMetaData: true
        signRequest: true
        socket:
          connectionManagerTimeout: 10000
          soTimeout: 10000
      authorize:
        url: http://uaa.local/oauth/authorize
      branding:
        companyName: Predix
        footerLegalText: "Copyright Â© 2021 General Electric Company. All rights reserved."
        footerLinks:
          Contact Us: mailto:info@predix.io

    uaa:
      url: http://uaa.local
      token:
        url: http://uaa.local/oauth/token
      approvals:
        url: http://uaa.local/approvals
      login:
        url: http://uaa.local/authenticate
      limitedFunctionality:
        enabled: false
        whitelist:
          endpoints:
            - /oauth/authorize/**
            - /oauth/token/**
            - /check_token/**
            - /login/**
            - /login.do
            - /logout/**
            - /logout.do
            - /saml/**
            - /autologin/**
            - /authenticate/**
            - /idp_discovery/**
          methods:
            - GET
            - HEAD
            - OPTIONS

    servlet:
      session-store: database

    LOGIN_SECRET: loginsecret

    NUREGO_API_URL: https://api.nurego.com
